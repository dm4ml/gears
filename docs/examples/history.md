# Directly Manipulating Chat History

Gears provides a way to directly manipulate the chat history before a gear is run. This is useful for multiple reasons:

- With complex chains of gears, the cost of the conversation can quickly add up. By removing unnecessary messages from the history, you can reduce the cost of the conversation.
- You can add messages to the history that are not generated by the LLMs.

## Example

To directly manipulate chat history, you should implement the `editHistory` method in your gear. This method takes in a `History` object and `pydantic` object and returns a `History` object. Here is an example of a gear that removes the first 2 (non-system) messages from the history:

```python
from gears import Gear, History
from pydantic import BaseModel

class ExampleGear(Gear):
    def prompt(self, context: BaseModel) -> str:
        return "Hello, world!"

    def editHistory(self, history: History, context: BaseModel) -> History:
        return History(system_message=history[0].content, messages=history.messages[3:], cost=history.cost) # (1)!
```

1. It's important to keep the `cost` of the history the same. Otherwise, the cost of the conversation will be incorrect.

Running an instance of this gear will remove the first 2 messages from the history before the gear is run for a given context. The `run` method always calls `editHistory` before running the gear on a given context. The default implementation of `editHistory` is to return the history unchanged.
